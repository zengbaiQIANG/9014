webpackJsonp([42],{TtHQ:function(e,t){},gEzv:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("woOf"),l=a.n(n),i=a("UgCr"),s=a("vLgD");function o(e,t){return Object(s.a)({url:"/sku/"+e,method:"get",params:t})}var r=a("3idm"),u=a("s/Rn"),c=a("mRsl"),d={keyword:null,pageNum:1,pageSize:5,publishStatus:null,verifyStatus:null,productSn:null,productCategoryId:null,brandId:null},p={name:"productList",data:function(){return{editSkuInfo:{dialogVisible:!1,productId:null,productSn:"",productAttributeCategoryId:null,stockList:[],productAttr:[],keyword:null},operates:[{label:"Publish Product",value:"publishOn"},{label:"Unpublish Product",value:"publishOff"},{label:"Mark as Recommended",value:"recommendOn"},{label:"Unmark Recommended",value:"recommendOff"},{label:"Mark as New",value:"newOn"},{label:"Unmark New",value:"newOff"},{label:"Move to Category",value:"transferCategory"},{label:"Move to Recycle Bin",value:"recycle"}],operateType:null,listQuery:l()({},d),list:null,total:null,listLoading:!0,selectProductCateValue:null,multipleSelection:[],productCateOptions:[],brandOptions:[],publishStatusOptions:[{value:1,label:"Published"},{value:0,label:"Unpublished"}],verifyStatusOptions:[{value:1,label:"Verified"},{value:0,label:"Unverified"}]}},created:function(){this.getList(),this.getBrandList(),this.getProductCateList()},watch:{selectProductCateValue:function(e){null!=e&&2==e.length?this.listQuery.productCategoryId=e[1]:this.listQuery.productCategoryId=null}},filters:{verifyStatusFilter:function(e){return 1===e?"Verified":"Unverified"}},methods:{getProductSkuSp:function(e,t){var a=JSON.parse(e.spData);return null!=a&&t<a.length?a[t].value:null},getList:function(){var e=this;this.listLoading=!0,Object(i.b)(this.listQuery).then(function(t){e.listLoading=!1,e.list=t.data.list,e.total=t.data.total})},getBrandList:function(){var e=this;Object(u.c)({pageNum:1,pageSize:100}).then(function(t){e.brandOptions=[];for(var a=t.data.list,n=0;n<a.length;n++)e.brandOptions.push({label:a[n].name,value:a[n].id})})},getProductCateList:function(){var e=this;Object(c.d)().then(function(t){var a=t.data;e.productCateOptions=[];for(var n=0;n<a.length;n++){var l=[];if(null!=a[n].children&&a[n].children.length>0)for(var i=0;i<a[n].children.length;i++)l.push({label:a[n].children[i].name,value:a[n].children[i].id});e.productCateOptions.push({label:a[n].name,value:a[n].id,children:l})}})},handleShowSkuEditDialog:function(e,t){var a=this;this.editSkuInfo.dialogVisible=!0,this.editSkuInfo.productId=t.id,this.editSkuInfo.productSn=t.productSn,this.editSkuInfo.productAttributeCategoryId=t.productAttributeCategoryId,this.editSkuInfo.keyword=null,o(t.id,{keyword:this.editSkuInfo.keyword}).then(function(e){a.editSkuInfo.stockList=e.data}),null!=t.productAttributeCategoryId&&Object(r.c)(t.productAttributeCategoryId,{type:0}).then(function(e){a.editSkuInfo.productAttr=e.data.list})},handleSearchEditSku:function(){var e=this;o(this.editSkuInfo.productId,{keyword:this.editSkuInfo.keyword}).then(function(t){e.editSkuInfo.stockList=t.data})},handleEditSkuConfirm:function(){var e=this;!this.editSkuInfo.stockList||this.editSkuInfo.stockList.length<=0?this.$message({message:"No SKU info available",type:"warning",duration:1e3}):this.$confirm("Confirm to save changes?","Notice",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then(function(){var t,a;(t=e.editSkuInfo.productId,a=e.editSkuInfo.stockList,Object(s.a)({url:"/sku/update/"+t,method:"post",data:a})).then(function(t){e.$message({message:"Updated successfully",type:"success",duration:1e3}),e.editSkuInfo.dialogVisible=!1})})},handleBatchOperate:function(){var e=this;null!=this.operateType?!this.multipleSelection||this.multipleSelection.length<1?this.$message({message:"Please select products to operate",type:"warning",duration:1e3}):this.$confirm("Are you sure to perform this batch operation?","Notice",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then(function(){var t=e.multipleSelection.map(function(e){return e.id});switch(e.operateType){case e.operates[0].value:e.updatePublishStatus(1,t);break;case e.operates[1].value:e.updatePublishStatus(0,t);break;case e.operates[2].value:e.updateRecommendStatus(1,t);break;case e.operates[3].value:e.updateRecommendStatus(0,t);break;case e.operates[4].value:e.updateNewStatus(1,t);break;case e.operates[5].value:e.updateNewStatus(0,t);break;case e.operates[6].value:break;case e.operates[7].value:e.updateDeleteStatus(1,t)}e.getList()}):this.$message({message:"Please select an operation type",type:"warning",duration:1e3})},handleSizeChange:function(e){this.listQuery.pageNum=1,this.listQuery.pageSize=e,this.getList()},handleCurrentChange:function(e){this.listQuery.pageNum=e,this.getList()},handleSelectionChange:function(e){this.multipleSelection=e},handlePublishStatusChange:function(e,t){var a=[];a.push(t.id),this.updatePublishStatus(t.publishStatus,a)},handleNewStatusChange:function(e,t){var a=[];a.push(t.id),this.updateNewStatus(t.newStatus,a)},handleRecommendStatusChange:function(e,t){var a=[];a.push(t.id),this.updateRecommendStatus(t.recommandStatus,a)},handleResetSearch:function(){this.selectProductCateValue=[],this.listQuery=l()({},d)},handleDelete:function(e,t){var a=this;this.$confirm("Are you sure you want to delete this item?","Notice",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then(function(){a.updateDeleteStatus(1,[t.id])})},updatePublishStatus:function(e,t){var a=this,n=new URLSearchParams;n.append("ids",t),n.append("publishStatus",e),Object(i.h)(n).then(function(){a.$message({message:"Updated successfully",type:"success",duration:1e3})})},updateNewStatus:function(e,t){var a=this,n=new URLSearchParams;n.append("ids",t),n.append("newStatus",e),Object(i.f)(n).then(function(){a.$message({message:"Updated successfully",type:"success",duration:1e3})})},updateRecommendStatus:function(e,t){var a=this,n=new URLSearchParams;n.append("ids",t),n.append("recommendStatus",e),Object(i.i)(n).then(function(){a.$message({message:"Updated successfully",type:"success",duration:1e3})})},updateDeleteStatus:function(e,t){var a=this,n=new URLSearchParams;n.append("ids",t),n.append("deleteStatus",e),Object(i.e)(n).then(function(e){a.$message({message:"Delete successfully",type:"success",duration:1e3})}),this.getList()}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"filter-container",attrs:{shadow:"never"}},[a("div",[a("i",{staticClass:"el-icon-search"}),e._v(" "),a("span",[e._v("Filter Search")]),e._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleSearchList()}}},[e._v("\n        Search\n      ")]),e._v(" "),a("el-button",{staticStyle:{float:"right","margin-right":"15px"},attrs:{size:"small"},on:{click:function(t){return e.handleResetSearch()}}},[e._v("\n        Reset\n      ")])],1),e._v(" "),a("div",{staticStyle:{"margin-top":"15px"}},[a("el-form",{attrs:{inline:!0,model:e.listQuery,size:"small","label-width":"140px"}},[a("el-form-item",{attrs:{label:"Search:"}},[a("el-input",{staticStyle:{width:"203px"},attrs:{placeholder:"Product Name"},model:{value:e.listQuery.keyword,callback:function(t){e.$set(e.listQuery,"keyword",t)},expression:"listQuery.keyword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Product Code:"}},[a("el-input",{staticStyle:{width:"203px"},attrs:{placeholder:"Product Code"},model:{value:e.listQuery.productSn,callback:function(t){e.$set(e.listQuery,"productSn",t)},expression:"listQuery.productSn"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Category:"}},[a("el-cascader",{attrs:{clearable:"",options:e.productCateOptions},model:{value:e.selectProductCateValue,callback:function(t){e.selectProductCateValue=t},expression:"selectProductCateValue"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Brand:"}},[a("el-select",{attrs:{placeholder:"Select Brand",clearable:""},model:{value:e.listQuery.brandId,callback:function(t){e.$set(e.listQuery,"brandId",t)},expression:"listQuery.brandId"}},e._l(e.brandOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Publish Status:"}},[a("el-select",{attrs:{placeholder:"All",clearable:""},model:{value:e.listQuery.publishStatus,callback:function(t){e.$set(e.listQuery,"publishStatus",t)},expression:"listQuery.publishStatus"}},e._l(e.publishStatusOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Verification Status:"}},[a("el-select",{attrs:{placeholder:"All",clearable:""},model:{value:e.listQuery.verifyStatus,callback:function(t){e.$set(e.listQuery,"verifyStatus",t)},expression:"listQuery.verifyStatus"}},e._l(e.verifyStatusOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1)]),e._v(" "),a("el-card",{staticClass:"operate-container",attrs:{shadow:"never"}},[a("i",{staticClass:"el-icon-tickets"}),e._v(" "),a("span",[e._v("Product List")]),e._v(" "),a("el-button",{staticClass:"btn-add",attrs:{size:"mini"},on:{click:function(t){return e.handleAddProduct()}}},[e._v("\n      Add\n    ")])],1),e._v(" "),a("div",{staticClass:"table-container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"productTable",staticStyle:{width:"100%"},attrs:{data:e.list,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"60",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"ID",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.id))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Image",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{height:"80px"},attrs:{src:e.row.pic}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Product Name",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.name))]),e._v(" "),a("p",[e._v("Brand: "+e._s(t.row.brandName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Price / Code",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("Price: ￥"+e._s(t.row.price))]),e._v(" "),a("p",[e._v("Code: "+e._s(t.row.productSn))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Tags",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("Published:\n            "),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(a){return e.handlePublishStatusChange(t.$index,t.row)}},model:{value:t.row.publishStatus,callback:function(a){e.$set(t.row,"publishStatus",a)},expression:"scope.row.publishStatus"}})],1),e._v(" "),a("p",[e._v("New:\n            "),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(a){return e.handleNewStatusChange(t.$index,t.row)}},model:{value:t.row.newStatus,callback:function(a){e.$set(t.row,"newStatus",a)},expression:"scope.row.newStatus"}})],1),e._v(" "),a("p",[e._v("Recommended:\n            "),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(a){return e.handleRecommendStatusChange(t.$index,t.row)}},model:{value:t.row.recommandStatus,callback:function(a){e.$set(t.row,"recommandStatus",a)},expression:"scope.row.recommandStatus"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Sort",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.sort))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"SKU Stock",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){return e.handleShowSkuEditDialog(t.$index,t.row)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Sales",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.sale))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Verification Status",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("verifyStatusFilter")(t.row.verifyStatus)))]),e._v(" "),a("p",[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleShowVerifyDetail(t.$index,t.row)}}},[e._v("\n              View Details\n            ")])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Actions",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleShowProduct(t.$index,t.row)}}},[e._v("View")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleUpdateProduct(t.$index,t.row)}}},[e._v("Edit")])],1),e._v(" "),a("p",[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleShowLog(t.$index,t.row)}}},[e._v("Logs")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("Delete")])],1)]}}])})],1)],1),e._v(" "),a("div",{staticClass:"batch-operate-container"},[a("el-select",{attrs:{size:"small",placeholder:"Batch Actions"},model:{value:e.operateType,callback:function(t){e.operateType=t},expression:"operateType"}},e._l(e.operates,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-button",{staticClass:"search-button",staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleBatchOperate()}}},[e._v("\n      Confirm\n    ")])],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-size":e.listQuery.pageSize,"page-sizes":[5,10,15],"current-page":e.listQuery.pageNum,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.listQuery,"pageNum",t)},"update:current-page":function(t){return e.$set(e.listQuery,"pageNum",t)}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"Edit SKU Information",visible:e.editSkuInfo.dialogVisible,width:"40%"},on:{"update:visible":function(t){return e.$set(e.editSkuInfo,"dialogVisible",t)}}},[a("span",[e._v("Product Code: ")]),e._v(" "),a("span",[e._v(e._s(e.editSkuInfo.productSn))]),e._v(" "),a("el-input",{staticStyle:{width:"50%","margin-left":"20px"},attrs:{placeholder:"Search by SKU Code",size:"small"},model:{value:e.editSkuInfo.keyword,callback:function(t){e.$set(e.editSkuInfo,"keyword",t)},expression:"editSkuInfo.keyword"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleSearchEditSku},slot:"append"})],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.editSkuInfo.stockList,border:""}},[a("el-table-column",{attrs:{label:"SKU Code",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.skuCode,callback:function(a){e.$set(t.row,"skuCode",a)},expression:"scope.row.skuCode"}})]}}])}),e._v(" "),e._l(e.editSkuInfo.productAttr,function(t,n){return a("el-table-column",{key:t.id,attrs:{label:t.name,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.getProductSkuSp(t.row,n))+"\n        ")]}}],null,!0)})}),e._v(" "),a("el-table-column",{attrs:{label:"Price",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.price,callback:function(a){e.$set(t.row,"price",a)},expression:"scope.row.price"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Stock",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.stock,callback:function(a){e.$set(t.row,"stock",a)},expression:"scope.row.stock"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Low Stock Alert",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.lowStock,callback:function(a){e.$set(t.row,"lowStock",a)},expression:"scope.row.lowStock"}})]}}])})],2),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editSkuInfo.dialogVisible=!1}}},[e._v("Cancel")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleEditSkuConfirm}},[e._v("Confirm")])],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(p,h,!1,function(e){a("TtHQ")},null,null);t.default=f.exports}});
//# sourceMappingURL=42.1055fcc8f1b0ae38c246.js.map